source:
  datasource: needful_things
  table: orders

# Metric references are key
metrics:
  - name: avg_sales
    title: Average Sales
    description: |
      This is the average sale $ amount, used for quarterly revenue calcs
    # -- or
    # query: |
    #   SELECT * FROM orders 
    # -- or
    # some yaml query thing
    expression: sales
    aggregation: avg
    distinct:
      - category # becomes avg(sales) over distinct category
    dimensions:
      - state
      - channel
    default_grain: day
    time_grains:
      - day
      - week
      - month
      - quarter
      - year
    time_expression: order_datetime
