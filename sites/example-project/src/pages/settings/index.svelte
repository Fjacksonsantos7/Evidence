<script context="module">
    import { dev } from '$app/env'    
    export const load = async ({fetch}) => {
        if(dev) {
            const res = await fetch("../api/settings.json")
            // const {settings} = await res.json()
            const bod = await res.json()
            const settings = bod.settings
            const gitIgnore = bod.gitIgnore
            return {
                props: {
                    settings,
                    gitIgnore 
                }
            }
        }
        else {
            return {
                props: {
                    settings: {},
                    gitIgnore: ""
                } 
            }
        }
    }
</script>

<script>
    export let settings 
    export let gitIgnore
    import DatabaseSettingsPanel from '$lib/ui/Databases/DatabaseSettingsPanel.svelte';
    import VersionControlPanel from '$lib/ui/VersionControl/VersionControlPanel.svelte'
    import DeploySettingsPanel from '$lib/ui/Deployment/DeploySettingsPanel.svelte'
    import TelemetrySettingsPanel from '$lib/ui/TelemetryOptOut/TelemetrySettingsPanel.svelte';
    
</script>

{#if dev}
<DatabaseSettingsPanel {settings} {gitIgnore}/> 
<VersionControlPanel {settings}/>
<DeploySettingsPanel {settings} /> 
<TelemetrySettingsPanel {settings} />
<br/>
{:else}
<p>Settings are only available in development mode.</p>
{/if}
